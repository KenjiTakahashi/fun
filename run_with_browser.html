<html>
	<head>
	</head>
	<body>
		<script type="text/javascript" src="./lib/require.js"></script>
		<script type="text/javascript">
		
		require('./lib/ometa-js/ometa-node');
		
		function getCode(path) {
			return require.get(path) + "\n"
		}
		var codeInput = 'sample_input/if_statement.fun'
		function log(statement) {
			console.log(statement)
		}
		
		function parseOmetaCode(parser) {
			var parserCode = getCode('./parsers/' + parser + '.ometa')
			try {
				ometa(parserCode)
			} catch(e) {
				var errorMsg = "Error: " + e
				if (e.errorPos) {
					errorMsg += " at pos " + e.errorPos + " >>>" + parserCode.substr(e.errorPos, 30) 
				}
				log(errorMsg)
				throw e
			}
		}

		parseOmetaCode('xml')
		parseOmetaCode('fun')

		var code = getCode(codeInput)

		var tree = FunParser.matchAll(code, "FunTop")

		log("\nHere's your AST:\n")
		log(tree)

		// var translated = FunTranslator.matchAll(tree, "FunTop")
		// sys.puts(translated)
		// 
			
		</script>
		
	</body>
</html>